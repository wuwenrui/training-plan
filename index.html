<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>å¢è‚Œè®­ç»ƒè®¡åˆ’</title>
<style>
:root {
  --bg: #f5f5f5;
  --text: #333;
  --primary: #007bff;
  --accent: #e0e0e0;
  --card-bg: #fff;
}
[data-theme="dark"] {
  --bg: #222;
  --text: #eee;
  --primary: #007bff;
  --accent: #333;
  --card-bg: #2a2a2a;
}
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: var(--bg);
  color: var(--text);
}
.container {
  display: flex;
  height: 100vh;
  overflow: hidden;
}
nav {
  width: 220px;
  background: var(--accent);
  overflow-y: auto;
  border-right: 1px solid var(--primary);
}
nav h2 {
  margin: 0;
  padding: 16px;
  font-size: 1.2em;
  color: var(--primary);
}
nav ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}
nav li {
  padding: 12px 16px;
  border-bottom: 1px solid rgba(0,0,0,0.05);
  cursor: pointer;
}
nav li.active {
  background: var(--primary);
  color: #fff;
}
header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}
#search {
  flex: 1 0 300px;
  padding: 6px 8px;
  border: 1px solid var(--primary);
  border-radius: 4px;
}
.controls {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}
.controls button {
  padding: 6px 8px;
  border: none;
  border-radius: 4px;
  background: var(--primary);
  color: #fff;
  cursor: pointer;
  font-size: 0.9em;
}
.controls button:hover {
  opacity: 0.9;
}
main {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
}
.card {
  background: var(--card-bg);
  padding: 12px;
  margin-bottom: 16px;
  border-radius: 6px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.card h3 {
  margin-top: 0;
}
.exercise-item {
  display: flex;
  align-items: flex-start;
  margin-bottom: 8px;
}
.exercise-item input {
  margin-right: 8px;
  margin-top: 4px;
}
.exercise-item .details {
  flex: 1;
}
.exercise-item .details h4 {
  margin: 0 0 4px 0;
  font-size: 1em;
  color: var(--primary);
}
.exercise-item .details p {
  margin: 0 0 4px 0;
  font-size: 0.88em;
  line-height: 1.3;
}
.exercise-item .details a {
  color: var(--primary);
  text-decoration: none;
  font-size: 0.8em;
}
.stretch-list, .nutrition {
  font-size: 0.9em;
  line-height: 1.4;
}
@media (max-width: 768px) {
  nav {
    width: 160px;
  }
}
</style>
</head>
<body>
<div class="container">
  <nav>
    <h2>è®­ç»ƒæ—¥</h2>
    <ul id="dayList"></ul>
  </nav>
  <main>
    <header>
      <input type="text" id="search" placeholder="æœç´¢åŠ¨ä½œæˆ–è‚Œç¾¤..." />
      <div class="controls">
        <button id="importBtn">ğŸ“¥ å¯¼å…¥è®¡åˆ’</button>
        <input type="file" id="importFile" style="display:none" accept="application/json"/>
        <button id="exportBtn">ğŸ“¤ å¯¼å‡º</button>
        <button id="printBtn">ğŸ–¨ï¸ æ‰“å°</button>
        <button id="themeBtn">ğŸŒ— åˆ‡æ¢ä¸»é¢˜</button>
      </div>
    </header>
    <div id="content"></div>
  </main>
</div>
<script>
// Default training plan
const defaultPlan = [
  {
    title: "D1ï½œPush Aï¼ˆèƒ¸/è‚©/ä¸‰å¤´ï¼‰",
    warmUp: "çƒ­èº«ï¼š8â€“10 åˆ†é’Ÿè½»æœ‰æ°§3â€“5â€²+è‚©/èƒ¸åŠ¨æ€æ´»åŠ¨+å§æ¨åŠ¨ä½œçƒ­èº«2ç»„ã€‚",
    strength: [
      {
        name: "å“‘é“ƒå¹³æ¿å§æ¨ 4Ã—6â€“10",
        muscle: "èƒ¸å¤§è‚Œä¸­æŸ",
        technique: "è‚©èƒ›åç¼©ä¸‹æ²‰ï¼Œè‚˜å¤–å±•45â€“60Â°ï¼Œ2â€“3ç§’ç¦»å¿ƒ+åº•éƒ¨åœ1ç§’",
        video: ""
      },
      {
        name: "ä¸Šæ–œå§æ¨ï¼ˆ30Â°ï¼‰ 3Ã—8â€“12",
        muscle: "èƒ¸å¤§è‚Œä¸ŠæŸ",
        technique: "è½ç‚¹åä¸Šèƒ¸ï¼Œé¡¶ç«¯ä¸è¿‡ä¼¸ï¼Œé¿å…è‚©å‰è·‘",
        video: ""
      },
      {
        name: "å®½æ¡ä¿¯å§æ’‘ 3Ã—12â€“15",
        muscle: "èƒ¸å¤§è‚Œ",
        technique: "èº«ä½“æˆä¸€ç›´çº¿ï¼Œæ…¢ç¦»å¿ƒï¼Œèƒ¸é™è‡³æ‰‹æŸ„é«˜åº¦",
        video: ""
      },
      {
        name: "åå§¿å“‘é“ƒè‚©æ¨ 3Ã—6â€“10",
        muscle: "ä¸‰è§’è‚Œå‰/ä¸­æŸ",
        technique: "è‚©ä¸‹æ²‰ä¸è€¸ï¼Œæ‰‹è…•ä¸­ç«‹ï¼Œä¸Šæ¨è‡³è€³æ—",
        video: ""
      },
      {
        name: "ä¾§å¹³ä¸¾ 3Ã—12â€“15",
        muscle: "ä¸‰è§’è‚Œä¸­æŸ",
        technique: "è‚˜ç•¥é«˜äºè…•ï¼Œåˆ°è‚©é«˜å³åœï¼Œé¡¶ç«¯åœ1ç§’",
        video: ""
      },
      {
        name: "ä»°å§è‡‚å±ˆä¼¸ 3Ã—10â€“12",
        muscle: "è‚±ä¸‰å¤´è‚Œé•¿å¤´",
        technique: "ä¸Šè‡‚å°½é‡å‚ç›´ï¼Œåªä¼¸è‚˜ï¼Œç¦»å¿ƒæ…¢",
        video: ""
      }
    ],
    stretch: [
      "é—¨æ¡†èƒ¸è‚Œæ‹‰ä¼¸ï¼ˆä¸åŒè§’åº¦ï¼‰",
      "ä¸Šèƒ¸æ–œè§’æ‹‰ä¼¸",
      "è‚±ä¸‰å¤´è¿‡é¡¶æ‹‰ä¼¸",
      "å‰ä¸‰è§’/èƒ¸å°è‚Œæ”¾æ¾",
      "é¢ˆæ–œæ–¹è½»ç‰µå¼•"
    ],
    nutrition: "0â€“30 åˆ†é’Ÿï¼šä¹³æ¸…1å‹º+å¿«ç¢³30â€“50gï¼›1â€“2å°æ—¶ï¼šé¸¡èƒ¸150â€“200g+ä¸»é£Ÿ80â€“120g+å¥åº·è„‚è‚ª10â€“15gï¼›é¥®æ°´500â€“700mlï¼Œè‚Œé…¸5g/å¤©ã€‚"
  },
  {
    title: "D2ï½œPull Aï¼ˆèƒŒ/äºŒå¤´/åæŸï¼‰",
    warmUp: "çƒ­èº«ï¼šä¸ŠèƒŒ/è‚©èƒ›æ¿€æ´»ï¼Œåˆ’èˆ¹åŠ¨ä½œçƒ­èº«ã€‚",
    strength: [
      {
        name: "å•è‡‚å“‘é“ƒåˆ’èˆ¹ 4Ã—8â€“12/ä¾§",
        muscle: "èƒŒé˜”è‚Œã€ä¸­ä¸‹æ–œæ–¹",
        technique: "å…ˆæ”¶è‚©èƒ›å†å¼¯è‚˜ï¼Œå‘é«‹éƒ¨æ‹‰ï¼Œç¦»å¿ƒè¦æœ‰æ‹‰ä¼¸æ„Ÿ",
        video: "https://www.bilibili.com/video/BV1Va411o7Mc/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"
      },
      {
        name: "èƒ¸æ‰˜å“‘é“ƒåˆ’èˆ¹ 3Ã—10â€“12",
        muscle: "ä¸­èƒŒï¼ˆè±å½¢/æ–œæ–¹ï¼‰",
        technique: "èƒ¸éª¨é¡¶å‡³ã€è„ŠæŸ±ä¸­ç«‹ï¼Œé¡¶ç«¯å¤¹è‚©èƒ›1ç§’",
        video: "https://www.bilibili.com/video/BV1vU411o7ba/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"
      },
      {
        name: "å“‘é“ƒä¸Šæ‹‰ 3Ã—10â€“12",
        muscle: "èƒŒé˜”è‚Œï¼ˆè¾…ï¼šèƒ¸ä¸‹æŸï¼‰",
        technique: "è‚˜å¾®å±ˆå›ºå®šï¼Œä»èƒ¸ä¸Šâ†’è€³åæ‹‰ä¼¸ï¼Œå›ç¨‹ç”¨èƒŒé˜”å¸¦å›",
        video: "https://www.bilibili.com/video/BV1tm4y1s7Np/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"
      },
      {
        name: "ä¿¯å§åæŸé£é¸Ÿ 3Ã—12â€“15",
        muscle: "ä¸‰è§’è‚ŒåæŸ",
        technique: "æŠ±å¤§æ ‘å¼§çº¿å¤–å±•ï¼Œé¡¶ç«¯æŒ¤å‹1ç§’",
        video: "https://www.bilibili.com/video/BV1X441157ET/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"
      },
      {
        name: "é”¤å¼å¼¯ä¸¾ 3Ã—10â€“12",
        muscle: "è‚±è‚Œã€è‚±æ¡¡è‚Œ",
        technique: "ä¸­ç«‹æ¡ã€è‚˜è´´èº«ï¼Œä¸‹æ”¾2â€“3ç§’",
        video: ""
      },
      {
        name: "æ—‹åå¼¯ä¸¾ 2Ã—12â€“15",
        muscle: "è‚±äºŒå¤´è‚Œ",
        technique: "å‘ä¸Šæ—‹åè‡³æŒå¿ƒæœä¸Šï¼Œé¡¶å³°åœ1ç§’",
        video: "https://www.bilibili.com/video/BV18U79zcEwg/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"
      }
    ],
    stretch: [
      "èƒŒé˜”è‚Œæ‹‰ä¼¸ï¼ˆå©´å„¿å¼ï¼‰",
      "ç©¿é’ˆå¼•çº¿ï¼ˆèƒ¸æ¤æ—‹è½¬ï¼‰",
      "èƒ¸æ¤æ¸©å’Œä¼¸å±•",
      "äºŒå¤´è‚Œå£æ‹‰ä¼¸",
      "å‰è‡‚å±ˆ/ä¼¸è‚Œæ‹‰ä¼¸"
    ],
    nutrition: "ä¹³æ¸…1å‹º+å¿«ç¢³30â€“50gï¼›æ­£é¤é¸¡èƒ¸150â€“200g+ä¸»é£Ÿ80â€“120g+è„‚è‚ª10gï¼›å¤§é‡å‡ºæ±—å¯åŠ ç”µè§£è´¨ã€‚"
  },
  {
    title: "D3ï½œLegs A & æ ¸å¿ƒ",
    warmUp: "çƒ­èº«ï¼šé«‹/è¸/è†åŠ¨æ€ + ç©ºæ†æ·±è¹²/è‡€æ¡¥çƒ­èº«ã€‚",
    strength: [
      {
        name: "é«˜ä¸¾æ·±è¹² 4Ã—8â€“12",
        muscle: "è‚¡å››å¤´è‚Œã€è‡€å¤§è‚Œ",
        technique: "è†éšè„šå°–ï¼Œåº•éƒ¨åœ1ç§’ï¼Œæ•´è„šå‘åŠ›",
        video: ""
      },
      {
        name: "å“‘é“ƒç½—é©¬å°¼äºšç¡¬æ‹‰ 4Ã—8â€“10",
        muscle: "è…˜ç»³è‚Œã€è‡€å¤§è‚Œ",
        technique: "é«‹ä¸»å¯¼åç§»ï¼ŒèƒŒä¸­ç«‹ï¼Œæ²¿è…¿å‰ä¾§ä¸‹æ”¾",
        video: ""
      },
      {
        name: "ä¿åŠ åˆ©äºšåˆ†è…¿è¹² 3Ã—8â€“12/ä¾§",
        muscle: "è‚¡å››å¤´è‚Œã€è‡€å¤§è‚Œ",
        technique: "å‰è„šå…¨è„šæŒå‹åœ°ï¼Œè‡€å‘ä¸‹ä¸å‰å†²",
        video: ""
      },
      {
        name: "è‡€æ¡¥/å‡³ä¸Šé«‹æ¨ 3Ã—10â€“12",
        muscle: "è‡€å¤§è‚Œ",
        technique: "ä¸‹å·´å¾®æ”¶ï¼Œé¡¶å³°éª¨ç›†åå€¾æ”¶è‡€1â€“2ç§’",
        video: ""
      },
      {
        name: "ç«™å§¿æè¸µ 4Ã—12â€“15",
        muscle: "è…“è‚ è‚Œ/æ¯”ç›®é±¼è‚Œ",
        technique: "è„šè·Ÿå……åˆ†ä¸‹æ²‰ï¼Œé¡¶ç«¯åœé¡¿",
        video: ""
      },
      {
        name: "æ ¸å¿ƒå¾ªç¯ 2â€“3è½®",
        muscle: "æ ¸å¿ƒï¼ˆè…¹æ¨ªè‚Œã€è…¹ç›´è‚Œç­‰ï¼‰",
        technique: "å¹³æ¿æ”¯æ’‘40â€“60ç§’+Dead Bug10â€“12/ä¾§+ä¾§æ¡¥30â€“45ç§’/ä¾§",
        video: ""
      }
    ],
    stretch: [
      "é«‹å±ˆè‚Œ/è‚¡å››å¤´æ‹‰ä¼¸ï¼ˆå¼“æ­¥å§¿ï¼‰",
      "è…˜ç»³è‚Œæ‹‰ä¼¸ï¼ˆæŠ¬é«˜å‰å±ˆï¼‰",
      "æ¢¨çŠ¶è‚Œ/è‡€éƒ¨æ‹‰ä¼¸ï¼ˆé¸½å­å¼ï¼‰",
      "å°è…¿è…“è‚ è‚Œæ‹‰ä¼¸ï¼ˆå¢™é¢ï¼‰",
      "ç«–è„Šè‚Œæ¸©å’Œå±ˆä¼¸ï¼ˆçŒ«ç‰›å¼ï¼‰"
    ],
    nutrition: "ä¹³æ¸…1å‹º+å¿«ç¢³40â€“60gï¼›æ­£é¤é¸¡èƒ¸180â€“220g+ä¸»é£Ÿ100â€“140g+è„‚è‚ª10â€“15gï¼›è¡¥æ°´700â€“900ml+ç”µè§£è´¨ã€‚"
  },
  {
    title: "D4ï½œPush Bï¼ˆèƒ¸è‚©ä¸‰å¤´å˜å¼ï¼‰",
    warmUp: "çƒ­èº«ï¼šåŒD1ã€‚",
    strength: [
      {
        name: "ä¸Šæ–œå§æ¨ 4Ã—6â€“10",
        muscle: "èƒ¸å¤§è‚Œä¸ŠæŸ",
        technique: "åŒD1è¦é¢†ï¼šè½ç‚¹åä¸Šèƒ¸ï¼Œé¡¶ç«¯ä¸è¿‡ä¼¸",
        video: ""
      },
      {
        name: "å¹³æ¿å§æ¨ 3Ã—8â€“12",
        muscle: "èƒ¸å¤§è‚Œä¸­æŸ",
        technique: "åŒD1è¦é¢†",
        video: ""
      },
      {
        name: "çª„æ¡/é’»çŸ³ä¿¯å§æ’‘ 3Ã—10â€“15",
        muscle: "è‚±ä¸‰å¤´è‚Œã€èƒ¸å†…ä¾§",
        technique: "è‚˜è´´èº«ï¼Œåº•éƒ¨åœ1ç§’",
        video: ""
      },
      {
        name: "é˜¿è¯ºå¾·æ¨ä¸¾ 3Ã—8â€“12",
        muscle: "ä¸‰è§’è‚Œå‰/ä¸­æŸ",
        technique: "ä¸‹æ–¹æŒå¿ƒå‘å†…ï¼Œä¸Šæ¨è¿‡ç¨‹ä¸­æ—‹å¤–è‡³æŒå¿ƒå‘å‰",
        video: ""
      },
      {
        name: "ä¾§å¹³ä¸¾ï¼ˆé™é‡ï¼‰ 2Ã—15â€“20",
        muscle: "ä¸‰è§’è‚Œä¸­æŸ",
        technique: "é¡¶ç«¯åœ1ç§’ï¼Œæœ€åä¸€ç»„é™é‡åˆ°æ¥è¿‘åŠ›ç«­",
        video: ""
      },
      {
        name: "åè‡‚ä¼¸/çª„æ¡ä¿¯å§æ’‘ 2â€“3Ã—12â€“15",
        muscle: "è‚±ä¸‰å¤´è‚Œå¤–/å†…ä¾§å¤´",
        technique: "ä¸Šè‡‚å®šç‚¹ï¼Œåªä¼¸è‚˜",
        video: ""
      }
    ],
    stretch: [
      "é—¨æ¡†èƒ¸è‚Œæ‹‰ä¼¸ï¼ˆå¤šè§’åº¦ï¼‰",
      "å‰ä¸‰è§’/èƒ¸å°è‚Œæ”¾æ¾",
      "è‚±ä¸‰å¤´è¿‡é¡¶æ‹‰ä¼¸",
      "é¢ˆæ–œæ–¹æ‹‰ä¼¸",
      "ä¸Šèƒ¸æ–œè§’æ‹‰ä¼¸"
    ],
    nutrition: "ä¹³æ¸…1å‹º+å¿«ç¢³30â€“50gï¼›æ­£é¤é¸¡èƒ¸150â€“200g+ä¸»é£Ÿ80â€“120g+è„‚è‚ª10â€“15gã€‚"
  },
  {
    title: "D5ï½œPull Bï¼ˆèƒŒå˜å¼+äºŒå¤´ï¼‰",
    warmUp: "çƒ­èº«ï¼šåŒD2ã€‚",
    strength: [
      {
        name: "å•è‡‚åˆ’èˆ¹ï¼ˆæ‹‰å‘é«‹éƒ¨ï¼‰ 4Ã—8â€“12/ä¾§",
        muscle: "èƒŒé˜”è‚Œ",
        technique: "å‘é«‹éƒ¨æ‹‰ï¼Œç¦»å¿ƒæ§åˆ¶",
        video: ""
      },
      {
        name: "å“‘é“ƒè€¸è‚© 3Ã—10â€“12",
        muscle: "æ–œæ–¹è‚Œä¸Šéƒ¨",
        technique: "å‘ä¸Šå‘åæï¼Œé¡¶å³°åœ2ç§’",
        video: ""
      },
      {
        name: "ä¿¯èº«åå‘é£é¸Ÿï¼ˆåå§¿ï¼‰ 3Ã—12â€“15",
        muscle: "ä¸‰è§’è‚ŒåæŸã€ä¸­ä¸‹æ–œæ–¹",
        technique: "æŠ±å¤§æ ‘å¼§çº¿å¤–å±•ï¼Œé¡¶ç«¯æŒ¤å‹1ç§’",
        video: ""
      },
      {
        name: "å“‘é“ƒä¸Šæ‹‰ 3Ã—10â€“12",
        muscle: "èƒŒé˜”è‚Œ",
        technique: "åŒD2-3è¦é¢†",
        video: ""
      },
      {
        name: "äº¤æ›¿å¼¯ä¸¾ 3Ã—10â€“12/ä¾§",
        muscle: "è‚±äºŒå¤´è‚Œ",
        technique: "ç¦»å¿ƒ3ç§’ï¼Œéå·¥ä½œä¾§ä¿æŒç­‰é•¿å¼ åŠ›",
        video: ""
      },
      {
        name: "åå‘å·è…¹ 2Ã—12â€“15",
        muscle: "ä¸‹è…¹",
        technique: "å·éª¨ç›†è€Œéç”©è…¿ï¼Œä¸‹æ”¾è´´åœ°",
        video: ""
      }
    ],
    stretch: [
      "å•ä¾§èƒŒé˜”ä¾§å±ˆæ‹‰ä¼¸",
      "ç©¿é’ˆå¼•çº¿+èƒ¸æ¤æ—‹è½¬",
      "å‰ä¼¸æŠ±çƒï¼ˆè‚©èƒ›åˆ†ç¦»ï¼‰",
      "äºŒå¤´è‚Œèƒ¸å‰ä¼¸è‚˜æ‹‰ä¼¸",
      "å‰è‡‚ä¼¸è‚Œæ‹‰ä¼¸"
    ],
    nutrition: "ä¹³æ¸…1å‹º+å¿«ç¢³30â€“50gï¼›æ­£é¤é¸¡èƒ¸150â€“200g+ä¸»é£Ÿ80â€“120g+è„‚è‚ª10gã€‚"
  },
  {
    title: "D6ï½œLegs B & æ ¸å¿ƒ",
    warmUp: "çƒ­èº«ï¼šåŒD3ã€‚",
    strength: [
      {
        name: "ç›¸æ‰‘é«˜ä¸¾æ·±è¹² 4Ã—8â€“12",
        muscle: "å†…æ”¶è‚Œã€è‡€å¤§è‚Œã€è‚¡å››å¤´è‚Œ",
        technique: "ç«™è·æ›´å®½ï¼Œè„šå°–å¤–å¼€20â€“30Â°ï¼Œè†éšè„šå°–",
        video: ""
      },
      {
        name: "è¡Œèµ°å¼“æ­¥ 3Ã—10â€“12/ä¾§",
        muscle: "è‚¡å››å¤´è‚Œã€è‡€ä¸­/å¤§è‚Œ",
        technique: "æ­¥å¹…ä¸­é•¿ï¼Œå‰è„šå…¨è„šæŒå—åŠ›",
        video: ""
      },
      {
        name: "å°é˜¶ä¸Šè¸ 3Ã—10â€“12/ä¾§",
        muscle: "è‚¡å››å¤´è‚Œã€è‡€å¤§è‚Œ",
        technique: "ä¸Šè¸è…¿å®Œæˆä¸»åŠ›ï¼Œæ…¢ç¦»å¿ƒä¸‹å°",
        video: ""
      },
      {
        name: "RDLï¼ˆæ…¢ç¦»å¿ƒ4ç§’ï¼‰ 3Ã—8â€“10",
        muscle: "è…˜ç»³è‚Œã€è‡€å¤§è‚Œ",
        technique: "å¼ºè°ƒç¦»å¿ƒæ§åˆ¶4ç§’",
        video: ""
      },
      {
        name: "å•è…¿æè¸µ 3Ã—12â€“15/ä¾§",
        muscle: "å°è…¿",
        technique: "è„šè·Ÿå……åˆ†ä¸‹æ²‰ï¼Œé¡¶ç«¯åœé¡¿",
        video: ""
      },
      {
        name: "æ ¸å¿ƒå¾®å¾ªç¯ 2â€“3è½®",
        muscle: "æ ¸å¿ƒ",
        technique: "æ‚¬ç©ºæŠ˜åˆ€10â€“12+ä¾§å‘ç™»å±±20+é¸Ÿç‹—10â€“12/ä¾§",
        video: ""
      }
    ],
    stretch: [
      "æ²™å‘æ‹‰ä¼¸/å‡³ä¸Šè‚¡å››å¤´",
      "ç›¸æ‰‘å¼€è·¨ï¼ˆå†…æ”¶è‚Œï¼‰",
      "è…˜ç»³è‚Œå‡³ä¸Šæ‹‰ä¼¸",
      "è‡€ä¸­è‚Œä¾§å‘æ‹‰ä¼¸",
      "æ¯”ç›®é±¼è‚Œæ‹‰ä¼¸ï¼ˆå±ˆè†å°è…¿ï¼‰"
    ],
    nutrition: "ä¹³æ¸…1å‹º+å¿«ç¢³50â€“70gï¼›æ­£é¤é¸¡èƒ¸200â€“250g+ä¸»é£Ÿ120â€“160g+å¤§ä»½è”¬èœï¼›æœªè¾¾æ ‡å¯ç¡å‰å†è¡¥ä¹³æ¸…ã€‚"
  },
  {
    title: "D7ï½œä¸»åŠ¨æ¢å¤",
    warmUp: "è½»åº¦æœ‰æ°§30â€“45åˆ†é’Ÿ+å…¨èº«è½»æ‹‰ä¼¸8â€“12åˆ†é’Ÿã€‚",
    strength: [],
    stretch: [
      "èƒ¸è‚Œæ‹‰ä¼¸",
      "èƒŒé˜”è‚Œï¼ˆä¾§å‘å©´å„¿å¼ï¼‰",
      "é«‹å±ˆè‚Œæ‹‰ä¼¸",
      "è…˜ç»³è‚Œæ‹‰ä¼¸",
      "å°è…¿æ‹‰ä¼¸",
      "é¢ˆæ–œæ–¹æ‹‰ä¼¸"
    ],
    nutrition: "æ€»çƒ­é‡æ¯”è®­ç»ƒæ—¥å°‘150â€“250kcalï¼›è›‹ç™½ä¸é™ï¼ˆ115â€“140g/æ—¥ï¼‰ã€‚ä¾‹ï¼šé¸¡èƒ¸ä¸‰é¤æ€»400â€“500g + é€‚é‡ä¸»é£Ÿ + ä¹³æ¸…æŒ‰éœ€è¡¥é½ã€‚"
  }
];

// Load plan and progress from localStorage
let plan = JSON.parse(localStorage.getItem('trainingPlan') || 'null') || defaultPlan;
let progress = JSON.parse(localStorage.getItem('trainingProgress') || '{}');

const dayListEl = document.getElementById('dayList');
const contentEl = document.getElementById('content');
const searchEl = document.getElementById('search');

// Render day list
function renderDayList(filter = '') {
  dayListEl.innerHTML = '';
  plan.forEach((day, index) => {
    const match = day.title.includes(filter) || day.strength.some(item => item.name.includes(filter) || item.muscle.includes(filter));
    if (!filter || match) {
      const li = document.createElement('li');
      li.textContent = day.title;
      li.addEventListener('click', () => renderDay(index));
      dayListEl.appendChild(li);
    }
  });
}

// Render selected day details
function renderDay(dayIndex) {
  // Set active on nav list
  const lis = dayListEl.querySelectorAll('li');
  lis.forEach((li, idx) => {
    li.classList.toggle('active', plan.findIndex(d => d.title === li.textContent) === dayIndex);
  });

  const day = plan[dayIndex];
  let html = '';
  html += `<div class="card"><h3>æ—¥ç¨‹ï¼š${day.title}</h3>`;
  if (day.warmUp) {
    html += `<p><strong>çƒ­èº«ï¼š</strong>${day.warmUp}</p>`;
  }
  html += '</div>';

  if (day.strength && day.strength.length > 0) {
    html += `<div class="card"><h3>åŠ›é‡è®­ç»ƒ</h3>`;
    day.strength.forEach((ex, idx) => {
      const exId = dayIndex + '-' + idx;
      const checked = progress[exId] ? 'checked' : '';
      html += `<div class="exercise-item">
        <input type="checkbox" id="chk-${exId}" ${checked} onchange="toggleCheck('${exId}', this.checked)">
        <div class="details">
          <h4>${ex.name}</h4>
          <p><em>éƒ¨ä½ï¼š</em>${ex.muscle}</p>
          <p><em>è¦é¢†ï¼š</em>${ex.technique}</p>`;
      if (ex.video) {
        html += `<p><a href="${ex.video}" target="_blank">ğŸ”— è§†é¢‘æ¼”ç¤º</a></p>`;
      }
      html += `</div></div>`;
    });
    html += `</div>`;
  }

  if (day.stretch && day.stretch.length > 0) {
    html += `<div class="card"><h3>æ‹‰ä¼¸</h3><ul class="stretch-list">`;
    day.stretch.forEach(s => {
      html += `<li>${s}</li>`;
    });
    html += `</ul></div>`;
  }

  if (day.nutrition) {
    html += `<div class="card"><h3>è¥å…»è¡¥å……</h3><p class="nutrition">${day.nutrition}</p></div>`;
  }

  contentEl.innerHTML = html;
}

// Toggle checkbox progress
function toggleCheck(id, state) {
  if (state) {
    progress[id] = true;
  } else {
    delete progress[id];
  }
  localStorage.setItem('trainingProgress', JSON.stringify(progress));
}

// Search function
searchEl.addEventListener('input', () => {
  const keyword = searchEl.value.trim();
  renderDayList(keyword);
});

// Import plan
_document.getElementById('importBtn').addEventListener('click', () => {
  document.getElementById('importFile').click();
});
_document.getElementById('importFile').addEventListener('change', (e) => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(evt) {
      try {
        plan = JSON.parse(evt.target.result);
        localStorage.setItem('trainingPlan', JSON.stringify(plan));
        // reset progress
        progress = {};
        localStorage.setItem('trainingProgress', JSON.stringify(progress));
        renderDayList();
        // select first day
        const firstLi = dayListEl.querySelector('li');
        if (firstLi) firstLi.click();
        alert('å·²å¯¼å…¥æ–°è®­ç»ƒè®¡åˆ’ï¼');
      } catch (err) {
        alert('å¯¼å…¥å¤±è´¥ï¼šæ–‡ä»¶æ ¼å¼é”™è¯¯');
      }
    };
    reader.readAsText(file);
  }
});

// Export plan
_document.getElementById('exportBtn').addEventListener('click', () => {
  const data = JSON.stringify(plan, null, 2);
  const blob = new Blob([data], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'training-plan.json';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
});

// Print
_document.getElementById('printBtn').addEventListener('click', () => {
  window.print();
});

// Theme toggle
_document.getElementById('themeBtn').addEventListener('click', () => {
  const current = document.documentElement.getAttribute('data-theme');
  if (current === 'dark') {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
  } else {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
  }
});

// Initialise theme
(function() {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme) {
    document.documentElement.setAttribute('data-theme', savedTheme);
  }
})();

// Initial render
renderDayList();
if (dayListEl.firstChild) {
  dayListEl.firstChild.click();
}
</script>
</body>
</html>
