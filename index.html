<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <title>æˆ‘çš„å¢è‚Œè®­ç»ƒè®¡åˆ’ï½œæ¯æ—¥æŸ¥çœ‹ä¸å¯¼å…¥</title>
  <style>
    /* === åŸºç¡€ä¸»é¢˜ï¼ˆç§»åŠ¨ä¼˜å…ˆï¼‰=== */
    :root{
      --bg: #0b1020; --card:#121831; --muted:#9fb0ff; --text:#e9edff; --sub:#c9d2ff;
      --accent:#6fa3ff; --accent-2:#7ef0c4; --border:#25305a; --chip:#1a2242; --good:#89f0a9;
      --warn:#ffd166; --radius:14px; --shadow: 0 6px 24px rgba(0,0,0,.24);
      --tap: 44px; /* æ‰‹æœºå¯è§¦è¾¾å°ºå¯¸ */
    }
    .light{ --bg:#f8faff; --card:#ffffff; --text:#0f1a3a; --sub:#33406a; --muted:#5060a8; --accent:#2b6cff; --accent-2:#0aa57a; --border:#dfe6ff; --chip:#eef2ff; --good:#0aa57a; --warn:#b98200; }
    @media (prefers-color-scheme: light){ :root{ color-scheme: light; } }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, PingFang SC, Microsoft YaHei, Helvetica, Arial, Noto Sans CJK SC, sans-serif; background:var(--bg); color:var(--text); overscroll-behavior-y:none; }
    a{ color:var(--accent) }

    /* å¸ƒå±€ï¼šç§»åŠ¨ç«¯å•åˆ—ï¼Œä¾§æ æŠ½å±‰åŒ– */
    .app{ display:grid; grid-template-columns: 1fr; min-height: 100dvh; }
    header.topbar{ position:sticky; top:0; z-index:30; backdrop-filter:saturate(120%) blur(6px); background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,0)); }
    .brand{ display:flex; align-items:center; gap:.6rem; padding:.8rem 1rem; border-bottom:1px solid var(--border) }
    .logo{ width:28px; height:28px; border-radius:8px; background:conic-gradient(from 220deg, var(--accent), var(--accent-2)); box-shadow:0 0 0 2px #0003 }
    .brand h1{ font-size:clamp(16px, 3.2vw, 18px); margin:0; letter-spacing:.02em }

    .toolbar{ position:sticky; top:54px; z-index:25; display:flex; gap:.5rem; padding:.65rem 1rem; border-bottom:1px solid var(--border); background:var(--card) }
    .btn{ appearance:none; border:1px solid var(--border); background:var(--chip); color:var(--text); padding:.55rem .7rem; border-radius:12px; cursor:pointer; display:inline-flex; align-items:center; gap:.45rem; font-size:.92rem; min-height:var(--tap); touch-action:manipulation }
    .btn.primary{ background:linear-gradient(180deg, color-mix(in oklab, var(--accent) 20%, transparent), transparent) }
    .btn.ghost{ background:transparent }
    .toolbar input[type="search"]{ flex:1 1 auto; min-width:0; border:1px solid var(--border); background:var(--card); color:var(--text); border-radius:12px; padding:.55rem .75rem; font-size:.95rem }

    /* ä¾§æ æŠ½å±‰ */
    aside.drawer{ position:fixed; inset:0 auto 0 0; width:min(86vw, 320px); transform:translateX(-101%); transition:transform .25s ease; background:var(--card); border-right:1px solid var(--border); z-index:40; display:flex; flex-direction:column; }
    .drawer.open{ transform:none }
    .drawer .days{ padding:1rem; display:flex; flex-direction:column; gap:.5rem; overflow:auto }
    .day-btn{ width:100%; text-align:left; border:1px solid var(--border); background:var(--chip); color:var(--text); padding:.75rem .8rem; border-radius:12px; cursor:pointer; display:flex; align-items:center; justify-content:space-between; min-height:var(--tap) }
    .day-btn small{ opacity:.8; color:var(--sub) }
    .day-btn.active{ border-color:var(--accent); box-shadow:0 0 0 3px color-mix(in oklab, var(--accent) 20%, transparent) }
    .backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); z-index:35; opacity:0; pointer-events:none; transition:opacity .2s }
    .backdrop.show{ opacity:1; pointer-events:auto }

    /* ä¸»åŒº */
    main{ padding-bottom:calc(64px + env(safe-area-inset-bottom)); }
    .wrap{ max-width:1100px; margin:0 auto; padding: .5rem 1rem 1.5rem }
    .headline{ display:flex; flex-wrap:wrap; align-items:center; gap:.6rem; padding:.8rem 0 .2rem }
    .headline h2{ font-size:clamp(18px, 4.2vw, 26px); margin:0 }
    .chip{ display:inline-flex; align-items:center; gap:.35rem; background:var(--chip); border:1px solid var(--border); color:var(--sub); padding:.24rem .5rem; border-radius:999px; font-size:.8rem }

    .section{ margin:1rem 0; border:1px solid var(--border); border-radius:var(--radius); background:var(--card); overflow:hidden; box-shadow:var(--shadow) }
    .section h3{ margin:0; padding:.85rem 1rem; border-bottom:1px solid var(--border); font-size:1rem; color:var(--muted) }
    .content{ padding: .75rem }

    .grid{ display:grid; grid-template-columns:1fr; gap:12px }
    @media (min-width:640px){ .grid{ grid-template-columns:repeat(2, minmax(0,1fr)) } }
    @media (min-width:1024px){ .grid{ grid-template-columns:repeat(3, minmax(0,1fr)) } }

    .ex-card{ border:1px solid var(--border); border-radius:12px; padding:12px; background:linear-gradient(180deg, rgba(255,255,255,.02), transparent), var(--card); display:flex; flex-direction:column; gap:8px }
    .ex-top{ display:flex; gap:.6rem; align-items:center }
    .check{ width:22px; height:22px; border-radius:6px; border:1px solid var(--border); display:inline-grid; place-items:center; cursor:pointer; background:var(--bg) }
    .check.done{ background:var(--good); border-color:color-mix(in oklab, var(--good) 70%, #000) }
    .title{ font-weight:700 }
    .meta{ display:flex; flex-wrap:wrap; gap:.4rem .6rem; color:var(--sub); font-size:.86rem }
    .muscles{ display:flex; flex-wrap:wrap; gap:.35rem }
    .muscles .m{ font-size:.78rem; background:var(--chip); border:1px solid var(--border); padding:.18rem .45rem; border-radius:999px; color:var(--text) }
    .cues{ margin:.25rem 0 0; padding-left:1.1rem }
    .cues li{ margin:.18rem 0 }
    .links{ display:flex; align-items:center; gap:.6rem; margin-top:.2rem }

    /* åº•éƒ¨ç§»åŠ¨æ“ä½œæ¡ */
    .mbar{ position:fixed; left:0; right:0; bottom:0; z-index:50; display:grid; grid-template-columns: repeat(4, 1fr); gap:6px; padding: .5rem max(1rem, env(safe-area-inset-left)) calc(.5rem + env(safe-area-inset-bottom)) max(1rem, env(safe-area-inset-right)); border-top:1px solid var(--border); background:var(--card) }
    .mbar .btn{ justify-content:center; font-size:.9rem; min-height:40px }

    /* æ¡Œé¢è§†å›¾ï¼šæ˜¾ç¤ºä¾§æ ï¼Œéšè—åº•éƒ¨æ¡ */
    @media (min-width:960px){
      .app{ grid-template-columns: 280px 1fr }
      aside.drawer{ position:sticky; transform:none; top:0; height:100dvh }
      .backdrop, .mbar, #drawerBtn{ display:none }
      .toolbar{ top:0; position:static; border-bottom:1px solid var(--border) }
      main{ padding-bottom:1.5rem }
    }

    /* æ‰“å° */
    @media print{
      .backdrop, .mbar, #drawerBtn{ display:none !important }
      aside.drawer{ display:block; transform:none; position:static }
      header.topbar, .toolbar{ position:static; background:#fff; color:#000 }
      body{ background:#fff; color:#000 }
      a::after{ content:" (" attr(href) ")"; font-size:.8em; color:#444 }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- æŠ½å±‰ä¾§æ ï¼ˆç§»åŠ¨ç«¯å¯æ”¶èµ·ï¼‰ -->
    <aside class="drawer" id="drawer" aria-label="è®­ç»ƒæ—¥é€‰æ‹©">
      <div class="brand"><div class="logo" aria-hidden="true"></div><h1>å¢è‚Œè®­ç»ƒè®¡åˆ’</h1></div>
      <div class="days" id="dayList"></div>
    </aside>
    <div class="backdrop" id="backdrop" aria-hidden="true"></div>

    <main>
      <header class="topbar">
        <div class="brand" style="border-bottom:none">
          <button id="drawerBtn" class="btn ghost" aria-label="æ‰“å¼€èœå•" title="èœå•">â˜°</button>
          <h1 style="margin:0;font-size:clamp(18px,4.2vw,22px)">æˆ‘çš„å¢è‚Œè®­ç»ƒè®¡åˆ’</h1>
        </div>
        <div class="toolbar">
          <button class="btn primary" id="importBtn" title="å¯¼å…¥ JSON è®¡åˆ’">ğŸ“¥ å¯¼å…¥</button>
          <input type="file" id="filePicker" accept="application/json" hidden>
          <button class="btn" id="exportBtn" title="å¯¼å‡ºå½“å‰è®¡åˆ’ JSON">ğŸ“¤ å¯¼å‡º</button>
          <button class="btn" id="printBtn" title="æ‰“å°æˆ–ä¿å­˜ä¸º PDF">ğŸ–¨ï¸ æ‰“å°</button>
          <button class="btn ghost" id="themeBtn" title="åˆ‡æ¢æ˜/æš—è‰²">ğŸŒ“ ä¸»é¢˜</button>
          <input id="search" type="search" placeholder="æœç´¢åŠ¨ä½œ / è‚Œç¾¤â€¦" aria-label="æœç´¢" />
        </div>
      </header>

      <div class="wrap">
        <div class="headline">
          <h2 id="dayTitle">â€”â€”</h2>
          <span class="chip" id="metaChip">RIR 1â€“3 Â· å¤åˆ 90â€“120s ä¼‘æ¯ Â· å­¤ç«‹ 60â€“90s</span>
        </div>

        <section class="section" id="warmupSec"><h3>çƒ­èº«</h3><div class="content" id="warmup"></div></section>
        <section class="section"><h3>åŠ›é‡è®­ç»ƒ</h3><div class="content"><div class="grid" id="exerciseGrid"></div></div></section>
        <section class="section"><h3>å½“æ—¥æ‹‰ä¼¸ï¼ˆæ¯åŠ¨ä½œ 20â€“40 ç§’ Ã— 2 ç»„ï¼‰</h3><div class="content" id="stretching"></div></section>
        <section class="section"><h3>å½“æ—¥è¥å…»ä¸è¡¥æ°´</h3><div class="content" id="nutrition"></div></section>
      </div>
    </main>

    <!-- ç§»åŠ¨ç«¯åº•éƒ¨æ“ä½œæ¡ -->
    <nav class="mbar" aria-label="åº•éƒ¨æ“ä½œ">
      <button class="btn" id="mImport">ğŸ“¥ å¯¼å…¥</button>
      <button class="btn" id="mExport">ğŸ“¤ å¯¼å‡º</button>
      <button class="btn" id="mPrint">ğŸ–¨ï¸ æ‰“å°</button>
      <button class="btn" id="mTheme">ğŸŒ“ ä¸»é¢˜</button>
    </nav>
  </div>

  <script>
    // â€”â€” æ•°æ®ï¼ˆä¿æŒä¸ä½ å½“å‰ç‰ˆæœ¬ä¸€è‡´ï¼Œå¯ç›´æ¥æ›¿æ¢ï¼‰â€”â€”
    const planData = {
      meta:{ title:"6 ç»ƒ 1 ä¼‘ Â· å¢è‚Œè®­ç»ƒè®¡åˆ’ï¼ˆå“‘é“ƒ/ä¿¯å§æ’‘æ¿/å‡³ï¼‰", updated:"v2-responsive" },
      days:[
        { id:"D1", name:"Push Aï¼ˆèƒ¸/è‚©/ä¸‰å¤´ï¼‰", warmup:["è½»æœ‰æ°§ 3â€“5â€² â†’ è‚©/èƒ¸åŠ¨æ€æ´»åŠ¨ â†’ å§æ¨åŠ¨ä½œçƒ­èº« 2 ç»„"],
          exercises:[
            { title:"å“‘é“ƒå¹³æ¿å§æ¨", sets:"4Ã—6â€“10", rir:"RIR 1â€“2", muscles:["ä¸»ï¼šèƒ¸ä¸­æŸ","è¾…ï¼šå‰ä¸‰è§’/è‚±ä¸‰å¤´"], cues:["è‚©èƒ›åç¼©ä¸‹æ²‰","è‚˜å¤–å±• 45â€“60Â°","2â€“3 ç§’ç¦»å¿ƒ + åº•åœ 1 ç§’","æ‰‹è…•ä¸­ç«‹ä¸åæŠ˜"] },
            { title:"ä¸Šæ–œå§æ¨ï¼ˆ30Â°ï¼‰", sets:"3Ã—8â€“12", muscles:["ä¸»ï¼šèƒ¸ä¸ŠæŸ","è¾…ï¼šå‰ä¸‰è§’/è‚±ä¸‰å¤´"], cues:["è½ç‚¹åä¸Šèƒ¸","é¡¶ç«¯ä¸è¿‡ä¼¸ï¼Œé¿å…è‚©å‰ç§»"] },
            { title:"å®½æ¡ä¿¯å§æ’‘ï¼ˆä¿¯å§æ’‘æ¿ï¼‰", sets:"3Ã—12â€“15", muscles:["ä¸»ï¼šèƒ¸å¤§è‚Œ","ç¨³ï¼šæ ¸å¿ƒ"], cues:["èº«ä½“ä¸€ç›´çº¿","æ…¢ç¦»å¿ƒ","èƒ¸é™è‡³æ‰‹æŸ„é«˜åº¦"] },
            { title:"åå§¿å“‘é“ƒè‚©ä¸Šæ¨ä¸¾", sets:"3Ã—6â€“10", muscles:["ä¸»ï¼šä¸‰è§’è‚Œå‰/ä¸­æŸ","è¾…ï¼šè‚±ä¸‰å¤´"], cues:["è‚©ä¸‹æ²‰ä¸è€¸","æ‰‹è…•ä¸­ç«‹","ä¸Šæ¨è‡³è€³æ—ä½"] },
            { title:"ä¾§å¹³ä¸¾", sets:"3Ã—12â€“15", muscles:["ä¸»ï¼šä¸‰è§’è‚Œä¸­æŸ"], cues:["è‚˜ç•¥é«˜äºè…•","åˆ°è‚©é«˜å³åœ","é¡¶ç«¯åœ 1 s"] },
            { title:"ä»°å§å“‘é“ƒè‡‚å±ˆä¼¸ï¼ˆå¤´åï¼‰", sets:"3Ã—10â€“12", muscles:["ä¸»ï¼šè‚±ä¸‰å¤´é•¿å¤´"], cues:["ä¸Šè‡‚å°½é‡å‚ç›´","åªä¼¸è‚˜","ç¦»å¿ƒæ…¢"] },
          ],
          stretching:["é—¨æ¡†èƒ¸è‚Œï¼ˆå¤šè§’åº¦ï¼‰","ä¸Šèƒ¸æ–œè§’æ‹‰ä¼¸","è‚±ä¸‰å¤´è¿‡é¡¶æ‹‰ä¼¸","å‰ä¸‰è§’/èƒ¸å°è‚Œæ”¾æ¾","é¢ˆæ–œæ–¹è½»ç‰µå¼•"],
          nutrition:["0â€“30 åˆ†é’Ÿï¼šä¹³æ¸… 1 å‹º + å¿«ç¢³ 30â€“50 g","1â€“2 å°æ—¶ï¼šé¸¡èƒ¸ 150â€“200 g + ä¸»é£Ÿ 80â€“120 g + è„‚è‚ª 10â€“15 g","è¡¥æ°´ 500â€“700 mlï¼›è‚Œé…¸ 5 g/å¤©"] },

        { id:"D2", name:"Pull Aï¼ˆèƒŒ/äºŒå¤´/åæŸï¼‰", warmup:["ä¸ŠèƒŒ/è‚©èƒ›æ¿€æ´» â†’ åˆ’èˆ¹çƒ­èº«"],
          exercises:[
            { title:"å•è‡‚å“‘é“ƒåˆ’èˆ¹", sets:"4Ã—8â€“12/ä¾§", muscles:["ä¸»ï¼šèƒŒé˜”/ä¸­ä¸‹æ–œæ–¹","è¾…ï¼šåæŸ/äºŒå¤´"], cues:["å…ˆæ”¶è‚©èƒ›å†å¼¯è‚˜","å‘é«‹éƒ¨æ‹‰","ç¦»å¿ƒæ‹‰ä¼¸"], links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1Va411o7Mc/"}] },
            { title:"èƒ¸æ‰˜å“‘é“ƒåˆ’èˆ¹", sets:"3Ã—10â€“12", muscles:["ä¸»ï¼šä¸­èƒŒï¼ˆè±å½¢/æ–œæ–¹ï¼‰"], cues:["èƒ¸éª¨é¡¶å‡³ï¼Œè„ŠæŸ±ä¸­ç«‹","é¡¶ç«¯å¤¹è‚©èƒ› 1 s"], links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1vU411o7ba/"}] },
            { title:"å“‘é“ƒä¸Šæ‹‰ï¼ˆPulloverï¼‰", sets:"3Ã—10â€“12", muscles:["ä¸»ï¼šèƒŒé˜”"], cues:["è‚˜å¾®å±ˆå›ºå®š","èƒ¸ä¸Šâ†’è€³åæ‹‰ä¼¸"], links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1tm4y1s7Np/"}] },
            { title:"ä¿¯å§åæŸé£é¸Ÿ", sets:"3Ã—12â€“15", muscles:["ä¸»ï¼šä¸‰è§’è‚ŒåæŸ"], cues:["æŠ±å¤§æ ‘å¼§çº¿å¤–å±•","é¡¶ç«¯æŒ¤å‹ 1 s"], links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1X441157ET/"}] },
            { title:"é”¤å¼å¼¯ä¸¾", sets:"3Ã—10â€“12", muscles:["ä¸»ï¼šè‚±è‚Œ/è‚±æ¡¡è‚Œ"], cues:["ä¸­ç«‹æ¡ï¼Œè‚˜è´´èº«","ç¦»å¿ƒ 2â€“3 s"] },
            { title:"æ—‹åå¼¯ä¸¾", sets:"2Ã—12â€“15", muscles:["ä¸»ï¼šè‚±äºŒå¤´"], cues:["å‘ä¸Šæ—‹åè‡³æŒå¿ƒæœä¸Š","é¡¶å³°åœ 1 s"], links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV18U79zcEwg/"}] },
          ],
          stretching:["èƒŒé˜”â€˜å©´å„¿å¼â€™","ç©¿é’ˆå¼•çº¿ï¼ˆèƒ¸æ¤æ—‹è½¬ï¼‰","èƒ¸æ¤æ¸©å’Œä¼¸å±•","äºŒå¤´å¢™é¢æ‹‰ä¼¸","å‰è‡‚å±ˆ/ä¼¸è‚Œ"],
          nutrition:["ä¹³æ¸… 1 å‹º + å¿«ç¢³ 30â€“50 g","é¸¡èƒ¸ 150â€“200 g + ä¸»é£Ÿ 80â€“120 g + è„‚è‚ª 10 g","å¤§é‡å‡ºæ±—å¯åŠ ç”µè§£è´¨"] },

        { id:"D3", name:"Legs A & æ ¸å¿ƒ", warmup:["é«‹/è¸/è†åŠ¨æ€ â†’ ç©ºæ†æ·±è¹²/è‡€æ¡¥çƒ­èº«"],
          exercises:[
            { title:"é«˜ä¸¾æ·±è¹²ï¼ˆGobletï¼‰", sets:"4Ã—8â€“12", muscles:["ä¸»ï¼šè‚¡å››å¤´/è‡€å¤§è‚Œ"], cues:["è†éšè„šå°–","åº•åœ 1 s","æ•´è„šå‘åŠ›"] },
            { title:"å“‘é“ƒç½—é©¬å°¼äºšç¡¬æ‹‰ï¼ˆRDLï¼‰", sets:"4Ã—8â€“10", muscles:["ä¸»ï¼šè…˜ç»³/è‡€"], cues:["é«‹ä¸»å¯¼åç§»ï¼ŒèƒŒä¸­ç«‹","æ²¿è…¿å‰ä¾§ä¸‹æ”¾"] , links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1Mr421L75m/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}]},
            { title:"ä¿åŠ åˆ©äºšåˆ†è…¿è¹²", sets:"3Ã—8â€“12/ä¾§", muscles:["ä¸»ï¼šè‚¡å››å¤´/è‡€å¤§è‚Œ"], cues:["å‰è„šå…¨è„šæŒ","è‡€å‘ä¸‹ä¸å‰å†²"] , links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1V94y1P7QG/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}]},
            { title:"è‡€æ¡¥/å‡³ä¸Šé«‹æ¨", sets:"3Ã—10â€“12", muscles:["ä¸»ï¼šè‡€å¤§è‚Œ"], cues:["ä¸‹å·´å¾®æ”¶","é¡¶å³°éª¨ç›†åå€¾ 1â€“2 s"] , links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1gn4y197Vp/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}]},
            { title:"ç«™å§¿æè¸µ", sets:"4Ã—12â€“15", muscles:["ä¸»ï¼šå°è…¿"], cues:["è„šè·Ÿå……åˆ†ä¸‹æ²‰","é¡¶ç«¯åœé¡¿"] , links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1ZLuxz6Eyk/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}]},
            { title:"æ ¸å¿ƒå¾ªç¯ Ã—2â€“3", sets:"å¹³æ¿ 40â€“60 sï½œDead Bug 10â€“12/ä¾§ï½œä¾§æ¡¥ 30â€“45 s/ä¾§" , links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1se411x7T6/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}]}
          ],
          stretching:["å¼“æ­¥é«‹å±ˆè‚Œ/è‚¡å››å¤´","è…˜ç»³ï¼ˆæŠ¬é«˜å‰å±ˆï¼‰","æ¢¨çŠ¶è‚Œ/è‡€ï¼ˆé¸½å­å¼ï¼‰","å°è…¿å¢™é¢æ‹‰ä¼¸","çŒ«ç‰›å¼"],
          nutrition:["è…¿å¤©é«˜ç¢³ï¼šä¹³æ¸… 1 å‹º + å¿«ç¢³ 40â€“60 g","é¸¡èƒ¸ 180â€“220 g + ä¸»é£Ÿ 100â€“140 g + è„‚è‚ª 10â€“15 g","è¡¥æ°´ 700â€“900 ml + ç”µè§£è´¨"] },

        { id:"D4", name:"Push Bï¼ˆèƒ¸è‚©ä¸‰å¤´å˜å¼ï¼‰", warmup:["è½»æœ‰æ°§ â†’ è‚©/èƒ¸åŠ¨æ€ â†’ å§æ¨åŠ¨ä½œçƒ­èº«"],
          exercises:[
            { title:"ä¸Šæ–œå§æ¨", sets:"4Ã—6â€“10", links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1aa4y1o7XA/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}] },
            { title:"å¹³æ¿å§æ¨", sets:"3Ã—8â€“12", links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1mD421J7o3/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}] },
            { title:"çª„æ¡/é’»çŸ³ä¿¯å§æ’‘", sets:"3Ã—10â€“15", links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1su4y137t2/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}] },
            { title:"é˜¿è¯ºå¾·æ¨ä¸¾", sets:"3Ã—8â€“12", links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1UW4y1p7Ut/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}] },
            { title:"ä¾§å¹³ä¸¾ï¼ˆé™é‡ï¼‰", sets:"2Ã—15â€“20", links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1Uf421v7Rf/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}] },
            { title:"åè‡‚ä¼¸ / çª„æ¡ä¿¯å§æ’‘", sets:"2â€“3Ã—12â€“15", links:[{label:"ç¤ºèŒƒ", href:"https://www.bilibili.com/video/BV1Ze411q7Fv/?spm_id_from=333.337.search-card.all.click&vd_source=134f9d94571b085ae89e25052eb145e9"}] }
          ],
          stretching:["é—¨æ¡†èƒ¸è‚Œï¼ˆå¤šè§’åº¦ï¼‰","å‰ä¸‰è§’/èƒ¸å°è‚Œæ”¾æ¾","ä¸‰å¤´è¿‡é¡¶","é¢ˆæ–œæ–¹","ä¸Šèƒ¸æ–œè§’"],
          nutrition:["ä¹³æ¸… 1 å‹º + å¿«ç¢³ 30â€“50 g","é¸¡èƒ¸ 150â€“200 g + ä¸»é£Ÿ 80â€“120 g + è„‚è‚ª 10â€“15 g"] },

        { id:"D5", name:"Pull Bï¼ˆèƒŒå˜å¼ + äºŒå¤´ï¼‰", warmup:["ä¸ŠèƒŒ/è‚©èƒ›æ¿€æ´» â†’ åˆ’èˆ¹çƒ­èº«"],
          exercises:[
            { title:"å•è‡‚åˆ’èˆ¹ï¼ˆæ‹‰å‘é«‹éƒ¨ï¼‰", sets:"4Ã—8â€“12/ä¾§" },
            { title:"å“‘é“ƒè€¸è‚©ï¼ˆé¡¶å³°åœ 2 sï¼‰", sets:"3Ã—10â€“12" },
            { title:"ä¿¯èº«åå‘é£é¸Ÿï¼ˆåå§¿ï¼‰", sets:"3Ã—12â€“15" },
            { title:"å“‘é“ƒä¸Šæ‹‰", sets:"3Ã—10â€“12" },
            { title:"äº¤æ›¿å¼¯ä¸¾", sets:"3Ã—10â€“12/ä¾§" },
            { title:"åå‘å·è…¹", sets:"2Ã—12â€“15" }
          ],
          stretching:["å•ä¾§èƒŒé˜”ä¾§å±ˆ","ç©¿é’ˆå¼•çº¿ + èƒ¸æ¤æ—‹è½¬","å‰ä¼¸æŠ±çƒï¼ˆè‚©èƒ›åˆ†ç¦»ï¼‰","äºŒå¤´èƒ¸å‰ä¼¸è‚˜","å‰è‡‚ä¼¸è‚Œ"],
          nutrition:["ä¹³æ¸… 1 å‹º + å¿«ç¢³ 30â€“50 g","é¸¡èƒ¸ 150â€“200 g + ä¸»é£Ÿ 80â€“120 g + è„‚è‚ª 10 g"] },

        { id:"D6", name:"Legs B & æ ¸å¿ƒ", warmup:["é«‹/è¸/è†åŠ¨æ€ â†’ ç©ºæ†æ·±è¹²/è‡€æ¡¥çƒ­èº«"],
          exercises:[
            { title:"ç›¸æ‰‘é«˜ä¸¾æ·±è¹²", sets:"4Ã—8â€“12" },
            { title:"è¡Œèµ°å¼“æ­¥", sets:"3Ã—10â€“12/ä¾§" },
            { title:"å°é˜¶ä¸Šè¸", sets:"3Ã—10â€“12/ä¾§" },
            { title:"RDLï¼ˆæ…¢ç¦»å¿ƒ 4 sï¼‰", sets:"3Ã—8â€“10" },
            { title:"å•è…¿æè¸µ", sets:"3Ã—12â€“15/ä¾§" },
            { title:"æ ¸å¿ƒå¾®å¾ªç¯ Ã—2â€“3", sets:"æ‚¬ç©ºæŠ˜åˆ€ 10â€“12ï½œä¾§å‘ç™»å±± 20ï½œé¸Ÿç‹— 10â€“12/ä¾§" }
          ],
          stretching:["æ²™å‘æ‹‰ä¼¸/å‡³ä¸Šè‚¡å››å¤´","ç›¸æ‰‘å¼€è·¨ï¼ˆå†…æ”¶ï¼‰","è…˜ç»³å‡³ä¸Š","è‡€ä¸­è‚Œä¾§å¼¯","æ¯”ç›®é±¼ï¼ˆå±ˆè†å°è…¿ï¼‰"],
          nutrition:["è…¿å¤©é«˜ç¢³ï¼šä¹³æ¸… 1 å‹º + å¿«ç¢³ 50â€“70 g","é¸¡èƒ¸ 200â€“250 g + ä¸»é£Ÿ 120â€“160 g + å¤§ä»½è”¬èœ","ç¡å‰æœªè¾¾æ ‡å¯åŠ ï¼šä¹³æ¸… 0.5â€“1 å‹º"] },

        { id:"D7", name:"ä¸»åŠ¨æ¢å¤", warmup:["30â€“45â€² ä½å¼ºåº¦æœ‰æ°§ï¼ˆå¿«èµ°/éª‘è¡Œï¼‰"],
          exercises:[{ title:"è½»æ‹‰ä¼¸æ¸…å•", sets:"å„ 20â€“30 s Ã—1â€“2", muscles:["èƒ¸è‚Œ","èƒŒé˜”ï¼ˆä¾§å‘å©´å„¿å¼ï¼‰","é«‹å±ˆè‚Œ","è…˜ç»³","å°è…¿","é¢ˆæ–œæ–¹"], cues:["æ¸©å’Œç‰µæ‹‰ã€å‘¼å¸æ”¾æ…¢"] }],
          stretching:["èƒ¸è‚Œ","èƒŒé˜”ä¾§å‘å©´å„¿å¼","é«‹å±ˆè‚Œ","è…˜ç»³è‚Œ","å°è…¿","é¢ˆæ–œæ–¹"],
          nutrition:["æ¯”è®­ç»ƒæ—¥å°‘ 150â€“250 kcalï¼›è›‹ç™½ä¸é™ï¼ˆ115â€“140 g/æ—¥ï¼‰","é¸¡èƒ¸ä¸‰é¤ + é€‚é‡ä¸»é£Ÿï¼Œä¹³æ¸…æŒ‰éœ€è¡¥é½"] }
      ]
    };

    // â€”â€” çŠ¶æ€ä¸æ¸²æŸ“ â€”â€”
    const state = { plan: structuredClone(loadPlan() || planData), dayIndex: +localStorage.getItem('dayIndex')||0, query: '' };
    function loadPlan(){ try{ const raw = localStorage.getItem('workout-plan-json'); return raw? JSON.parse(raw): null }catch(e){ return null } }
    function savePlan(){ localStorage.setItem('workout-plan-json', JSON.stringify(state.plan)) }

    const dayListEl = document.getElementById('dayList');
    const dayTitleEl = document.getElementById('dayTitle');
    const warmupEl = document.getElementById('warmup');
    const exGridEl = document.getElementById('exerciseGrid');
    const stretchingEl = document.getElementById('stretching');
    const nutritionEl = document.getElementById('nutrition');

    function renderDayButtons(){
      dayListEl.innerHTML = '';
      state.plan.days.forEach((d, i)=>{
        const btn = document.createElement('button');
        btn.className = 'day-btn' + (i===state.dayIndex? ' active':'');
        btn.innerHTML = `<span><strong>${d.id}</strong> Â· ${d.name}</span><small>æŸ¥çœ‹</small>`;
        btn.onclick = ()=>{ state.dayIndex = i; localStorage.setItem('dayIndex', i); renderAll(); closeDrawer(); window.scrollTo({top:0,behavior:'smooth'}) };
        dayListEl.appendChild(btn);
      });
    }

    function htmlList(items){ if(!items || !items.length) return '<div class="links">â€”</div>'; return `<ul class="cues">${items.map(x=>`<li>${x}</li>`).join('')}</ul>` }
    function keyForCheck(dayIdx, title){ return `done:${dayIdx}:${title}` }

    function renderDay(){
      const day = state.plan.days[state.dayIndex];
      dayTitleEl.textContent = `${day.id}ï½œ${day.name}`;
      warmupEl.innerHTML = htmlList(day.warmup);

      // Exercises
      exGridEl.innerHTML = '';
      const q = state.query.trim().toLowerCase();
      const list = (day.exercises||[]).filter(ex=> !q || ex.title.toLowerCase().includes(q) || (ex.muscles||[]).join(',').toLowerCase().includes(q));
      list.forEach(ex=>{
        const card = document.createElement('div');
        card.className = 'ex-card';
        const key = keyForCheck(state.dayIndex, ex.title);
        const done = localStorage.getItem(key)==='1';
        card.innerHTML = `
          <div class="ex-top">
            <div class="check ${done? 'done':''}" role="checkbox" aria-checked="${done}" title="ç‚¹å‡»å‹¾é€‰å®Œæˆ"></div>
            <div><div class="title">${ex.title}</div><div class="meta">${ex.sets?`ç»„æ¬¡ï¼š${ex.sets}`:''}${ex.rir?` Â· ${ex.rir}`:''}</div></div>
          </div>
          <div class="muscles">${(ex.muscles||[]).map(m=>`<span class="m">${m}</span>`).join('')}</div>
          ${htmlList(ex.cues)}
          <div class="links">${(ex.links||[]).map(l=>`<a target="_blank" rel="noopener" href="${l.href}">ğŸ”— ${l.label}</a>`).join('')}</div>
        `;
        const chk = card.querySelector('.check');
        chk.addEventListener('click', ()=>{ const v=!chk.classList.contains('done'); chk.classList.toggle('done'); localStorage.setItem(key, v? '1':'0') });
        exGridEl.appendChild(card);
      });

      stretchingEl.innerHTML = htmlList(day.stretching);
      nutritionEl.innerHTML = htmlList(day.nutrition);
    }

    function renderAll(){ renderDayButtons(); renderDay(); }

    // â€”â€” äº¤äº’ï¼šå¯¼å…¥/å¯¼å‡º/æ‰“å°/ä¸»é¢˜/æœç´¢/æŠ½å±‰ â€”â€”
    const filePicker = document.getElementById('filePicker');
    document.getElementById('importBtn').addEventListener('click', ()=> filePicker.click());
    document.getElementById('mImport').addEventListener('click', ()=> filePicker.click());
    filePicker.addEventListener('change', (e)=>{
      const file = e.target.files?.[0]; if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{ try{ const json = JSON.parse(reader.result); if(!json.days || !Array.isArray(json.days)) throw new Error('æ ¼å¼ä¸æ­£ç¡®ï¼šç¼ºå°‘ days æ•°ç»„'); state.plan=json; state.dayIndex=0; savePlan(); renderAll(); alert('å¯¼å…¥æˆåŠŸï¼'); }catch(err){ alert('å¯¼å…¥å¤±è´¥ï¼š'+err.message) } };
      reader.readAsText(file, 'utf-8'); e.target.value='';
    });

    function exportPlan(){ const blob = new Blob([JSON.stringify(state.plan, null, 2)], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href=url; a.download='training-plan.json'; a.click(); URL.revokeObjectURL(url); }
    document.getElementById('exportBtn').addEventListener('click', exportPlan);
    document.getElementById('mExport').addEventListener('click', exportPlan);

    function doPrint(){ window.print() }
    document.getElementById('printBtn').addEventListener('click', doPrint);
    document.getElementById('mPrint').addEventListener('click', doPrint);

    const THEME_KEY = 'plan-theme-light';
    function applyTheme(){ const isLight = localStorage.getItem(THEME_KEY)==='1'; document.documentElement.classList.toggle('light', isLight) }
    applyTheme();
    function toggleTheme(){ const cur = localStorage.getItem(THEME_KEY)==='1'; localStorage.setItem(THEME_KEY, cur? '0':'1'); applyTheme(); }
    document.getElementById('themeBtn').addEventListener('click', toggleTheme);
    document.getElementById('mTheme').addEventListener('click', toggleTheme);

    // æœç´¢ï¼ˆå»æŠ–ï¼‰
    let timer; document.getElementById('search').addEventListener('input', (e)=>{ clearTimeout(timer); const v=e.target.value; timer=setTimeout(()=>{ state.query=v; renderDay(); }, 120) });

    // æŠ½å±‰æ§åˆ¶
    const drawer = document.getElementById('drawer');
    const backdrop = document.getElementById('backdrop');
    function openDrawer(){ drawer.classList.add('open'); backdrop.classList.add('show') }
    function closeDrawer(){ drawer.classList.remove('open'); backdrop.classList.remove('show') }
    document.getElementById('drawerBtn').addEventListener('click', openDrawer);
    backdrop.addEventListener('click', closeDrawer);

    // åˆæ¬¡æ¸²æŸ“
    renderAll();
  </script>
</body>
</html>
